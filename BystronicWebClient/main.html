<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <title>Order Manager</title>

    <link href="css/bootstrap/bootstrap.css" rel="stylesheet">
    <link href="css/ui/jsTree/style.css" rel="stylesheet">

    <link href="css/ui/jquery-ui.css" rel="stylesheet">
    <link href="css/ui/jqgrid.css" rel="stylesheet">

    <link href="css/ui/datepicker.css" rel="stylesheet">
    <link href="css/ui/timepicker.css" rel="stylesheet">
    <link href="css/ui/bootstrap-dialog.css" rel="stylesheet">
    <link href="css/ui/angular-bootstrap-toggle.css" rel="stylesheet">
    <link href="css/ui/animate.css" rel="stylesheet">
    <link href="css/ui/style.css" rel="stylesheet">

    <script src="js/jquery-3.1.0.js"></script>
    <script src="js/jquery-ui.js"></script>
    <script src="js/Tools.js"></script>
    <script src="js/bootstrap/bootstrap.js"></script>
    <script src="js/angular/angular.js"></script>
    <script src="js/angular/angular-cookies.js"></script>
    <script src="js/ui/jquery.ui.touch-punch.min.js"></script>
    <script src="js/ui/fastclick.js"></script>
    <script src="js/ui/jqgrid.js"></script>
    <script src="js/ui/grid.locale-en.js"></script>

    <script src="js/ui/pako.js"></script>
    <script src="js/ui/notify.js"></script>
    <script src="js/ui/datepicker.js"></script>
    <script src="js/ui/timepicker.js"></script>
    <script src="js/ui/bootstrap-dialog.js"></script>
    <script src="js/ui/angular-bootstrap-toggle.js"></script>
    <script src="js/ui/jquery.inputmask.bundle.js"></script>
    <script src="js/ui/ace/ace.js"></script>

    <!-- load ace accessibility extension -->
    <script src="js/ui/ace/ext-chromevox.js"></script>
    <script src="js/ui/pdfmake.js"></script>
    <script src="js/ui/vfs_fonts.js"></script>

    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>

    <script src="Scripts/Tools.js"></script>
    <script src="Scripts/ExportToCSV.js"></script>
    <script src="Scripts/ExportToPDF.js"></script>
    <script src="Scripts/Connection.js"></script>
    <script src="Scripts/ConnectionNew.js"></script>
    <script src="Scripts/UI/Tools.js"></script>
    <script src="Scripts/UI/OrderGrid.js"></script>
    <script src="Scripts/UI/OrderDataGrid.js"></script>
    <script src="Scripts/UI/OrderEditDialog.js"></script>
    <script src="Scripts/UI/SalesmenListGrid.js"></script>
    <script src="Scripts/UI/SalesListGrid.js"></script>
    <script src="Scripts/UI/CustomerListGrid.js"></script>
    <script src="Scripts/UI/ProductListGrid.js"></script>
    <script src="Scripts/UI/ColumnList.js"></script>
    <script src="Scripts/BystronicClient.js"></script>
</head>

<body ng-app="BystronicClientModule">
    <div class="container ng-cloak" style="padding:10px 0 10px 0" ng-controller="MainController" ng-init="init()">
        <div class="ibox float-e-margins panel animated fadeInDown" style="height:100%;overflow:hidden">
            <div class="ibox-title">
                <h5><img src="css/ui/canadaflag.png" height="16" width="16" style="margin-top:-2px" ng-show="IsCanadianVersion"><img src="css/ui/usflag.png" height="16" width="16" style="margin-top:-2px" ng-show="!IsCanadianVersion"><span style="color:#e42820;font-weight:bold;margin-left:5px">{{IsDemoVersion ? 'Company' : 'Bystronic'}}</span><span style="font-weight:bold;color:#787878">&nbsp;Order Manager,&nbsp;{{version}}&nbsp;-</span><span style="color:black;font-style:italic;font-weight:bold">&nbsp;{{user.Name}}</span><span style="color:#787878;font-style:italic;font-weight:bold">&nbsp;-&nbsp;{{user.Role}}</span><span style="color:#787878;font-style:normal;font-weight:bold">&nbsp;&nbsp;&nbsp;&nbsp;<i style="color:#e42820;" class="glyphicon glyphicon-check toolbar-icon"></i>&nbsp;{{currentView}}</span></h5>
                <div class="ibox-tools">
                    <div class="btn-group btn-group-merge" style="margin-right:10px;" ng-hide="!permissions.CanCreateOrder">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i style="color:#e42820;" class="glyphicon glyphicon-plus toolbar-icon"></i>
                            <span style="color:#787878;font-weight:bold">New Order</span>
                        </a>
                        <ul class="dropdown-menu pull-right">
                            <li>
                                <a href="#" class="menu-option" ng-click="newOrder('Laser')"><i style="color:#e42820" class="glyphicon glyphicon-list-alt"></i>&nbsp;&nbsp;Laser</a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="#" class="menu-option" ng-click="newOrder('Automation')"><i style="color:#e42820" class="glyphicon glyphicon-list-alt"></i>&nbsp;&nbsp;Automation</a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="#" class="menu-option" ng-click="newOrder('Pressbrake')"><i style="color:#e42820" class="glyphicon glyphicon-list-alt"></i>&nbsp;&nbsp;Pressbrake</a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="#" class="menu-option" ng-click="newOrder('Tube Laser')"><i style="color:#e42820" class="glyphicon glyphicon-list-alt"></i>&nbsp;&nbsp;Tube Laser</a>
                            </li>
                        </ul>
                    </div>

                    <div class="btn-group btn-group-merge" style="margin-right:10px;">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i style="color:#e42820;" class="glyphicon glyphicon-th toolbar-icon"></i>
                            <span style="color:#787878;font-weight:bold">View</span>
                        </a>
                        <ul class="dropdown-menu pull-right">
                            <li id="ViewsSubmenu" class="dropdown-submenu" style="width:100%" ng-hide="views.length < 2">
                                <a href="#" tabindex="-1" class="menu-option">
                                    <i style="color:#e42820;" class="glyphicon glyphicon-unchecked"></i>&nbsp;&nbsp;Change View
                                </a>
                                <ul class="dropdown-menu" style="list-style-type:none;">
                                    <li>
                                        <a href="#" class="menu-option" ng-repeat="view in views" ng-click="changeOrderView(view)"><i style="color:#e42820" ng-class="{'glyphicon glyphicon-check': view.Name==currentView, 'glyphicon glyphicon-unchecked': view.Name!=currentView}"></i>&nbsp;&nbsp;{{view.Name}}</a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a href="#" class="menu-option" ng-hide="currentView=='Default'" ng-click="deleteOrderView()"><i style="color:#e42820" class="glyphicon glyphicon-remove"></i>&nbsp;&nbsp;Delete View '{{currentView}}'</a>
                            </li>
                            <li>
                                <a href="#" class="menu-option" ng-click="editColumnsDialog()"><i style="color:#e42820" class="glyphicon glyphicon-pencil"></i>&nbsp;&nbsp;Edit Columns</a>
                            </li>
                            <li ng-show="MajorVersion > 1" class="divider"></li>
                            <li>
                                <a href="#" class="menu-option" ng-click="exportToPDF()" ng-show="MajorVersion > 1" ng-disabled="orders.length==0"><i style="color:#e42820" class="glyphicon glyphicon-download-alt"></i>&nbsp;&nbsp;Export to PDF</a>
                            </li>
                            <li>
                                <a href="#" class="menu-option" ng-click="exportToCSV()" ng-disabled="orders.length==0"><i style="color:#e42820" class="glyphicon glyphicon-download-alt"></i>&nbsp;&nbsp;Export to CSV</a>
                            </li>
                        </ul>
                    </div>

                    <div class="btn-group btn-group-merge">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i style="color:#e42820;" class="glyphicon glyphicon-cog toolbar-icon"></i>
                            <span style="color:#787878;font-weight:bold">Options</span>
                        </a>
                        <ul class="dropdown-menu multi-level pull-right" role="menu" id="optionsmenu">
                            <li>
                                <a href="#" class="menu-option" ng-click="showSalesmenList()" ng-hide="!isAdministrator()"><i style="color:#e42820" class="glyphicon glyphicon-user toolbar-icon"></i>&nbsp;&nbsp;Dealers / DSEs</a>
                            </li>
                            <li>
                                <a href="#" class="menu-option" ng-click="showSalesList()" ng-hide="!isAdministrator()"><i style="color:#e42820" class="glyphicon glyphicon-usd toolbar-icon"></i>&nbsp;&nbsp;Sales</a>
                            </li>
                            <li>
                                <a href="#" class="menu-option" ng-click="showProductList()" ng-hide="!isAdministrator()"><i style="color:#e42820" class="glyphicon glyphicon-align-left toolbar-icon"></i>&nbsp;&nbsp;Products</a>
                            </li>
                            <li>
                                <a href="#" class="menu-option" ng-click="showCustomerList()" ng-hide="!isAdministrator()"><i style="color:#e42820" class="glyphicon glyphicon-briefcase toolbar-icon"></i>&nbsp;&nbsp;Customers</a>
                            </li>
                            <li id="CalculationSubmenu" class="dropdown-submenu pull-left" style="width:100%" ng-hide="!isAdministrator()">
                                <a href="#" tabindex="-1" class="menu-option">
                                    <i style="color:#e42820;" class="glyphicon glyphicon-sort-by-attributes"></i>&nbsp;&nbsp;Calculation
                                </a>
                                <ul class="dropdown-menu" style="list-style-type:none;">
                                    <li>
                                        <a href="#" class="menu-option" ng-click="showFormulaEditor('Laser')">Laser</a>
                                    </li>
                                    <li>
                                        <a href="#" class="menu-option" ng-click="showFormulaEditor('Automation')">Automation</a>
                                    </li>
                                    <li>
                                        <a href="#" class="menu-option" ng-click="showFormulaEditor('Pressbrake')">Pressbrake</a>
                                    </li>
                                    <li>
                                        <a href="#" class="menu-option" ng-click="showFormulaEditor('Tube Laser')">Tube Laser</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="divider" ng-hide="!isAdministrator()"></li>
                            <li>
                                <a href="#" class="menu-option" ng-click="showSettings()"><i style="color:#e42820" class="glyphicon glyphicon-wrench toolbar-icon"></i>&nbsp;&nbsp;Settings</a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="#" class="menu-option" ng-click="logOut()"><i style="color:#e42820" class="glyphicon glyphicon-off toolbar-icon"></i>&nbsp;&nbsp;Log Out</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div id="mainscreen" class="ibox-content" style="padding:10px 5px 40px 5px;">
                <div class="panel panel-default" style="margin-bottom:10px">
                    <span class="loading-spinner" ng-hide="loaded"><i class="fas fa-sync fa-spin fa-5x" style="color:darkgrey;display: block"></i></span>
                    <div class="panel-heading" data-toggle="collapse" data-target="#filterPanel" aria-expanded="false" aria-controls="filterPanel">
                        <span style="cursor:pointer;color:#787878;font-weight:bold"><i style="color:#e42820;" class="glyphicon glyphicon-filter"></i>&nbsp;Filter Orders</span>
                    </div>
                    <div id="filterPanel" class="collapse">
                        <form class="panel-body form-horizontal" style="padding-top:0;padding-bottom:0" id="filterPanel12">
                            <div class="row">
                                <div class="form-group-sm col-sm-2">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Product</label>
                                        <select class="form-control" multiple style="font-weight:bold" ng-model="filter.Product" ng-options="option.ID as option.Name for option in templates" ng-change="filterChanged()"></select>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-2">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Status</label>
                                        <select class="form-control" multiple style="font-weight:bold" ng-model="filter.Status" ng-options="option for option in ['pending', 'approved', 'released', 'paid']" ng-change="filterChanged()"></select>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-2">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Region</label>
                                        <select class="form-control" multiple style="font-weight:bold" ng-model="filter.Region" ng-options="option for option in regions" ng-change="regionFilterChanged()"></select>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-2">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Dealer / DSE / RSM</label>
                                        <select class="form-control" multiple style="font-weight:bold" ng-model="filter.Salesman" ng-options="option.ID as option.Name for option in filteredSalesmen" ng-change="filterChanged()"></select>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-2">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Order Date (From)</label>
                                        <div class="input-group date" id="filterStartDate">
                                            <input type='text' class="form-control" style="font-weight:bold" placeholder="From" ng-model="filter.StartDate" ng-change="filterChanged()" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                        <label class="control-label">Estimated Ship Date (From)</label>
                                        <div class="input-group date" id="filterStartDate">
                                            <input type='text' class="form-control" style="font-weight:bold" placeholder="From" ng-model="filter.ShipStartDate" ng-change="filterChanged()" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-2">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Order Date (To)</label>
                                        <div class="input-group date" id="filterEndDate">
                                            <input type='text' class="form-control" style="font-weight:bold" placeholder="To" ng-model="filter.EndDate" ng-change="filterChanged()" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                        <label class="control-label">Estimated Ship Date (To)</label>
                                        <div class="input-group date" id="filterEndDate">
                                            <input type='text' class="form-control" style="font-weight:bold" placeholder="To" ng-model="filter.ShipEndDate" ng-change="filterChanged()" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-top:5px">
                                <div class="col-sm-2">
                                    <span style="cursor:pointer;color:darkred;" ng-click="clearOrderFilter('product')"><i class="glyphicon glyphicon-remove"></i>&nbsp;Clear Product Filter</span>
                                </div>
                                <div class="col-sm-2">
                                    <span style="cursor:pointer;color:darkred;" ng-click="clearOrderFilter('status')"><i class="glyphicon glyphicon-remove"></i>&nbsp;Clear Status Filter</span>
                                </div>
                                <div class="col-sm-2">
                                    <span style="cursor:pointer;color:darkred;" ng-click="clearOrderFilter('region')"><i class="glyphicon glyphicon-remove"></i>&nbsp;Clear Region Filter</span>
                                </div>
                                <div class="col-sm-2">
                                    <span style="cursor:pointer;color:darkred;" ng-click="clearOrderFilter('salesman')"><i class="glyphicon glyphicon-remove"></i>&nbsp;Clear Dealer / DSE Filter</span>
                                </div>
                                <div class="col-sm-2">
                                    <span style="cursor:pointer;color:darkred;" ng-click="clearOrderFilter('daterange')"><i class="glyphicon glyphicon-remove"></i>&nbsp;Clear Date Range Filter</span>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="jqGrid_wrapper" id="order_grid_wrapper" style="min-height:300px;">
                    <table id="order_grid" style="font-size:small;"></table>
                </div>
                <div class="text-center"  ng-show="loginError && loginError.length > 0">
                    <label style="color:red;font-size:small;font-weight:normal;font-style:italic">{{loginError}}</label>
                </div>
            </div>
        </div>

        <div class="modal fade" id="orderContent" role="dialog" tabindex="-1">
            <div class="modal-dialog" style="width:900px">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header order-ui-dialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-list-alt"></span>&nbsp;&nbsp;Order {{order.PONumber}} - {{(templates | filter: {'ID':order.TemplateID})[0].Name}} - {{order.Status}}</h4>
                    </div>
                    <div class="modal-body" style="max-height:630px;overflow:auto;padding-top:0;padding-bottom:10px">
                        <form class="panel-body form-horizontal" style="padding-bottom:10px;padding-top:0; padding-left:0;padding-right:0">
                            <div class="row">
                                <div class="form-group-sm col-sm-3">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Dealer / DSE</label>
                                        <select class="form-control" style="font-weight:bold" ng-disabled="!canEditOrder()" ng-model="tmpOrder.Salesman" ng-change="salesmanSelectionChanged()" ng-options="option.ID as option.Name for option in salesmen  | orderBy: 'Name'"></select>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-3">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Split With</label>
                                        <select class="form-control" style="font-weight:bold" ng-disabled="!canEditOrder()" ng-model="tmpOrder.Salesman2" ng-change="salesmanSelectionChanged()" ng-options="option.ID as option.Name for option in salesmen2 | orderBy: 'Name'"></select>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-3" ng-if="!IsCanadianVersion">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Regional Sales Manager</label>
                                        <select class="form-control" style="font-weight:bold" ng-disabled="!canEditOrder()" ng-model="tmpOrder.RSM" ng-options="option.ID as option.Name for option in salesmen2 | filter: {'Role':'RSM'} | orderBy: 'Name'"></select>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-3" ng-if="!IsCanadianVersion">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Pay RSM Commission</label><br />
                                        <toggle size="btn-sm" off="No" on="Yes" onstyle="btn-danger" offstyle="btn-default" ng-disabled="!canEditOrder()" ng-change="payRSMCommissionToggled()" ng-model="tmpOrder.PayRSMCommission">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group-sm col-sm-3">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Customer</label>
                                        <select class="form-control" style="font-weight:bold" ng-disabled="!canEditOrder()" ng-model="tmpOrder.CustomerID" ng-change="customerSelectionChanged()" ng-options="option.ID as option.Name for option in tmpCustomers"></select>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-3">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Job Number</label>
                                        <input type="text" placeholder="Job Number" class="form-control" ng-disabled="!canEditOrder()" style="font-weight:bold" ng-model="tmpOrder.PONumber">
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-3">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Sales Order</label>
                                        <input type="text" placeholder="Sales Order" class="form-control" ng-disabled="!canEditOrder()" style="font-weight:bold" ng-model="tmpOrder.SalesOrder">
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-3">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Order Date</label>
                                        <div class="input-group date" id="orderdate">
                                            <input type='text' class="form-control" style="font-weight:bold" placeholder="Order Date" ng-disabled="!canEditOrder()" ng-model="tmpOrder.OrderDateString" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group-sm col-sm-3">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Estimated Ship Date</label>
                                        <div class="input-group date" id="estimatedshipdate">
                                            <input type='text' class="form-control" style="font-weight:bold" placeholder="Estimated Ship Date" ng-disabled="!canEditOrder()" ng-model="tmpOrder.EstimatedShipDateString" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-3">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Date of Final Payment</label>
                                        <div class="input-group date" id="finalpaymentdate">
                                            <input type='text' class="form-control" style="font-weight:bold" placeholder="Date of Final Payment" ng-disabled="!canEditOrder()" ng-model="tmpOrder.FinalPaymentDateString" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-6">
                                    <label class="control-label">Comment</label>
                                    <input type="text" placeholder="Comment" class="form-control" style="font-style:italic" ng-model="tmpOrder.Comment">
                                </div>
                            </div>
                        </form>
                        <div class="col-sm-1 pull-right">
                            <button type="button" class="btn btn-xs btn-danger" style="width:70px;white-space:normal;color:white" ng-hide="!canEditOrder()" ng-click="editOrderProducts()">Edit Machines and Options</button>
                        </div>
                        <div class="jqGrid_wrapper" id="order_input_data_grid_wrapper">
                            <table id="order_input_data_grid" style="font-size:small" ng-hide="orderHasTooling()"></table>
                            <table id="order_input_data_grid_with_tooling" style="font-size:small" ng-hide="!orderHasTooling()"></table>
                        </div>
                        <div class="jqGrid_wrapper" id="order_output_data_grid_wrapper">
                            <table id="order_output_data_grid" style="font-size:small"></table>
                        </div>
                        <div class="jqGrid_wrapper" id="order_footnote_data_grid_wrapper">
                            <table id="order_footnote_data_grid" style="font-size:small"></table>
                        </div>
                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <div class="btn-group dropup" ng-hide="!tmpOrder.PONumber || MajorVersion == 1 || !isAdministrator()">
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="glyphicon glyphicon-download-alt"></i>&nbsp;Export to PDF
                            </button>
                            <ul class="dropdown-menu pull-right">
                                <li>
                                    <a href="#" class="menu-option" ng-click="exportOrderToPDF(true)"><i style="color:#e42820" class="glyphicon glyphicon-briefcase"></i>&nbsp;&nbsp;Managment Report (Full)</a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a href="#" class="menu-option" ng-click="exportOrderToPDF(false)"><i style="color:#e42820" class="glyphicon glyphicon-user"></i>&nbsp;&nbsp;Employee Report (Restricted)</a>
                                </li>
                            </ul>
                        </div>
                        <button type="button" class="btn btn-default" ng-hide="!tmpOrder.PONumber || MajorVersion == 1 || isAdministrator()" ng-click="exportOrderToPDF(false)"><i class="glyphicon glyphicon-download-alt"></i>&nbsp;Export to PDF</button>
                        <button type="button" class="btn btn-info" ng-hide="!canApproveOrder()" ng-click="approveOrder()"><i class="glyphicon glyphicon-ok"></i>&nbsp;Approve</button>
                        <button type="button" class="btn btn-warning" ng-hide="!canReleaseOrder()" ng-click="releaseOrder()"><i class="glyphicon glyphicon-share-alt"></i>&nbsp;Release</button>
                        <button type="button" class="btn btn-success" style="background-color:darkseagreen;border-color:darkseagreen" ng-hide="!canMarkPaidOrder()" ng-click="markPaidOrder()"><i class="glyphicon glyphicon-usd"></i>&nbsp;Mark as Paid</button>
                        <button type="button" class="btn btn-info" ng-hide="!canUndoApproveOrder()" ng-click="undoApproveOrder()"><i class="glyphicon glyphicon-remove"></i>&nbsp;Undo Approval</button>
                        <button type="button" class="btn btn-warning" ng-hide="!canUndoReleaseOrder()" ng-click="undoReleaseOrder()"><i class="glyphicon glyphicon-remove"></i>&nbsp;Undo Release</button>
                        <button type="button" class="btn btn-success" style="background-color:darkseagreen;border-color:darkseagreen" ng-hide="!canUndoMarkPaidOrder()" ng-click="undoMarkPaidOrder()"><i class="glyphicon glyphicon-usd"></i>&nbsp;Undo Paid Status</button>

                        <button type="button" class="btn btn-danger" ng-click="saveOrderOrComment()">Save</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        <!-- <button type="button" class="btn btn-default" data-dismiss="modal" ng-hide="tmpOrder.Status!='released'">Close</button> -->
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="editOrder" role="dialog" style="margin-top:30px">
            <div class="modal-dialog" style="width:720px">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header order-ui-subdialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-list-alt"></span>&nbsp;&nbsp;Edit Order {{order.PONumber}} - {{(templates | filter: {'ID':order.TemplateID})[0].Name}}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="jqGrid_wrapper">
                            <table id="product_grid" style="font-size:small;" ng-hide="orderHasTooling()"></table>
                            <table id="product_grid_with_tooling" style="font-size:small" ng-hide="!orderHasTooling()"></table>
                        </div>
                        <div>
                            <button type="button" class="btn btn-danger btn-xs pull-right" style="margin-top:6px" ng-click="addProductDialog()">Add Product</button>
                        </div>
                        <div class="jqGrid_wrapper" style="margin-top:34px">
                            <table id="product_total_grid" style="font-size:small;"></table>
                        </div>
                        <div class="jqGrid_wrapper" style="margin-top:10px">
                            <table id="product_sellprice_grid" style="font-size:small;"></table>
                        </div>
                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <button type="button" class="btn btn-danger" ng-click="updateOrderInputData()">Update</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="columnList" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header order-ui-dialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-pencil"></span>&nbsp;&nbsp;Select / Move Order Grid Columns</h4>
                    </div>
                    <div class="modal-body">
                        <form class="panel-body form-horizontal" style="margin-bottom:-20px">
                            <div class="row">
                                <div class="jqGrid_wrapper" id="column_grid_wrapper">
                                    <table id="column_grid" style="font-size:small;"></table>
                                </div>
                            </div>
                            <div class="row" style="margin-top:20px;">
                                <div class="form-inline">
                                    <div class="form-group col-sm-12">
                                        <label class="control-label" style="margin-top:-5px;margin-right:10px">Save As View:&nbsp;</label>
                                        <input type='text' class="form-control" style="font-weight:bold" placeholder="View" ng-model="newView" />
                                    </div>
                                </div>
                            </div>
                        </form>
                        
                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <button type="button" class="btn btn-danger" ng-click="saveColumns()">OK</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="productList" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header order-ui-dialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-align-left"></span>&nbsp;&nbsp;Product List</h4>
                    </div>
                    <div class="modal-body">
                        <div class="jqGrid_wrapper" id="productlist_wrapper">
                            <table id="productlist_grid" style="font-size:small;"></table>
                        </div>

                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <button type="button" class="btn btn-danger" ng-click="editProductDialog()"><i class="glyphicon glyphicon-plus-sign"></i>&nbsp;&nbsp;Add Product</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="addProduct" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header order-ui-subdialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-align-left"></span>&nbsp;&nbsp;Edit Product</h4>
                    </div>
                    <div class="modal-body" style="max-height:630px;overflow:auto;padding-top:0">
                        <form class="panel-body form-horizontal" style="padding-bottom:10px;padding-top:0; padding-left:0;padding-right:0">
                            <div class="row">
                                <div class="form-group-sm col-sm-12">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Name</label>
                                        <input type="text" placeholder="Name" class="form-control" style="font-weight:bold" ng-model="newProduct.Name">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group-sm col-sm-5">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Type</label>
                                        <select class="form-control" style="font-weight:bold" ng-model="newProduct.ProductTypeID" ng-options="option.ID as option.Name for option in productTypes"></select>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-4">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Price</label>
                                        <input type="text" placeholder="Price" class="form-control currency" style="font-weight:bold" ng-model="newProduct.Value">
                                    </div>
                                </div>
                                <!--
                            <div class="form-group-sm col-sm-3">
                                <div class="d-flex flex-column" style="margin-top:20px">
                                    <label class="control-label"><input type="checkbox" ng-true-value="'True'" ng-false-value="'False'" ng-model="newProduct.HasTooling">&nbsp;Has Tooling</label>
                                </div>
                            </div>
                            -->
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <button type="button" class="btn btn-danger" ng-click="addProduct()">OK</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="salesmenList" role="dialog">
            <div class="modal-dialog" style="width:580px">
                <div class="modal-content">
                    <div class="modal-header order-ui-dialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-user"></span>&nbsp;&nbsp;Dealer / DSE List</h4>
                    </div>
                    <div class="modal-body">
                        <div class="jqGrid_wrapper" id="salesmenlist_wrapper">
                            <table id="salesmenlist_grid" style="font-size:small;"></table>
                        </div>

                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <button type="button" class="btn btn-danger" ng-click="editSalesmanDialog()"><i class="glyphicon glyphicon-plus-sign"></i>&nbsp;&nbsp;Add Dealer / DSE</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="addSalesman" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header order-ui-subdialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-user"></span>&nbsp;&nbsp;Edit Dealer / DSE</h4>
                    </div>
                    <div class="modal-body" style="max-height:380px;overflow:auto;padding-top:0">
                        <form class="panel-body form-horizontal" style="padding-bottom:10px;padding-top:0; padding-left:0;padding-right:0">
                            <div class="row">
                                <div class="form-group-sm col-sm-12">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Login</label>
                                        <input type="text" placeholder="Name" class="form-control" style="font-weight:bold" ng-model="newSalesman.ID" ng-disabled="!newSalesman.isNew">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group-sm col-sm-12">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Name</label>
                                        <input type="text" placeholder="Name" class="form-control" style="font-weight:bold" ng-model="newSalesman.Name">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group-sm col-sm-12">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Role</label>
                                        <select id="role" class="form-control" style="font-weight:bold" ng-model="newSalesman.Role" ng-options="option for option in salesmenRoles"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group-sm col-sm-12">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Region</label>
                                        <select id="redion" class="form-control" style="font-weight:bold" ng-model="newSalesman.Region" ng-options="option for option in regions"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group-sm col-sm-12">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Cost Center</label>
                                        <input type="text" placeholder="Cost Center" class="form-control" style="font-weight:bold" ng-model="newSalesman.CostCenter">
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-top:10px;">
                                <div class="form-group-sm col-sm-5">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Sale Goal</label>
                                        <input type="text" placeholder="Sale Goal" class="form-control currency" style="font-weight:bold" ng-model="salesGoalTarget" ng-change="updateSalesGoal(newSalesman.ID)">
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-4">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">For Year</label>
                                        <select id="year" class="form-control" style="font-weight:bold" ng-model="year" ng-options="option for option in years" ng-change="salesGoalSelectionChanged(newSalesman.ID)"></select>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <button type="button" class="btn btn-danger" ng-click="addSalesman()">OK</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="salesList" role="dialog">
            <div class="modal-dialog" style="width:560px">
                <div class="modal-content">
                    <div class="modal-header order-ui-dialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-usd"></span>&nbsp;&nbsp;Sales</h4>
                    </div>
                    <div class="modal-body" style="margin-top:-20px;margin-bottom:0">
                        <form class="panel-body form-horizontal">
                            <div class="row" style="margin-bottom:10px">
                                <div class="form-inline">
                                    <div class="form-group col-sm-6">
                                        <label class="control-label" style="margin-top:-5px;margin-right:10px">Year</label>
                                        <select class="form-control" ng-model="selectedYear" ng-options="option for option in availableYears" ng-change="salesYearSelectionChanged()"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="jqGrid_wrapper" id="saleslist_wrapper">
                                    <table id="saleslist_grid" style="font-size:small;"></table>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="customerList" role="dialog">
            <div class="modal-dialog" style="width:900px">
                <div class="modal-content">
                    <div class="modal-header order-ui-dialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;&nbsp;Customer List</h4>
                    </div>
                    <div class="modal-body">
                        <div class="jqGrid_wrapper" id="customerlist_wrapper">
                            <table id="customerlist_grid" style="font-size:small;"></table>
                        </div>

                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <button type="button" class="btn btn-danger" ng-click="editCustomerDialog()"><i class="glyphicon glyphicon-plus-sign"></i>&nbsp;&nbsp;Add Customer</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="addCustomer" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header order-ui-subdialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-briefcase"></span>&nbsp;&nbsp;Edit Customer</h4>
                    </div>
                    <div class="modal-body" style="max-height:630px;overflow:auto;padding-top:0">
                        <form class="panel-body form-horizontal" style="padding-bottom:10px;padding-top:0; padding-left:0;padding-right:0">
                            <div class="row">
                                <div class="form-group-sm col-sm-7">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Name</label>
                                        <input type="text" placeholder="Name" class="form-control" style="font-weight:bold" ng-model="newCustomer.Name">
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-5">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">SAP Number</label>
                                        <input type="text" placeholder="SAP Number" class="form-control" style="font-weight:bold" ng-model="newCustomer.SapNumber">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group-sm col-sm-12">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Address</label>
                                        <input type="text" placeholder="Address" class="form-control" style="font-weight:bold" ng-model="newCustomer.Address">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group-sm col-sm-4">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">City</label>
                                        <input type="text" placeholder="City" class="form-control" style="font-weight:bold" ng-model="newCustomer.City">
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-5" ng-if="!IsCanadianVersion">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">State / Province</label>
                                        <select id="state" name="state" class="form-control" style="font-weight:bold" ng-model="newCustomer.State">
                                            <option value="">Select One</option>
                                            <optgroup label="U.S. States/Territories">
                                                <option value="AK">Alaska</option>
                                                <option value="AL">Alabama</option>
                                                <option value="AR">Arkansas</option>
                                                <option value="AZ">Arizona</option>
                                                <option value="CA">California</option>
                                                <option value="CO">Colorado</option>
                                                <option value="CT">Connecticut</option>
                                                <option value="DC">District of Columbia</option>
                                                <option value="DE">Delaware</option>
                                                <option value="FL">Florida</option>
                                                <option value="GA">Georgia</option>
                                                <option value="HI">Hawaii</option>
                                                <option value="IA">Iowa</option>
                                                <option value="ID">Idaho</option>
                                                <option value="IL">Illinois</option>
                                                <option value="IN">Indiana</option>
                                                <option value="KS">Kansas</option>
                                                <option value="KY">Kentucky</option>
                                                <option value="LA">Louisiana</option>
                                                <option value="MA">Massachusetts</option>
                                                <option value="MD">Maryland</option>
                                                <option value="ME">Maine</option>
                                                <option value="MI">Michigan</option>
                                                <option value="MN">Minnesota</option>
                                                <option value="MO">Missouri</option>
                                                <option value="MS">Mississippi</option>
                                                <option value="MT">Montana</option>
                                                <option value="NC">North Carolina</option>
                                                <option value="ND">North Dakota</option>
                                                <option value="NE">Nebraska</option>
                                                <option value="NH">New Hampshire</option>
                                                <option value="NJ">New Jersey</option>
                                                <option value="NM">New Mexico</option>
                                                <option value="NV">Nevada</option>
                                                <option value="NY">New York</option>
                                                <option value="OH">Ohio</option>
                                                <option value="OK">Oklahoma</option>
                                                <option value="OR">Oregon</option>
                                                <option value="PA">Pennsylvania</option>
                                                <option value="PR">Puerto Rico</option>
                                                <option value="RI">Rhode Island</option>
                                                <option value="SC">South Carolina</option>
                                                <option value="SD">South Dakota</option>
                                                <option value="TN">Tennessee</option>
                                                <option value="TX">Texas</option>
                                                <option value="UT">Utah</option>
                                                <option value="VA">Virginia</option>
                                                <option value="VT">Vermont</option>
                                                <option value="WA">Washington</option>
                                                <option value="WI">Wisconsin</option>
                                                <option value="WV">West Virginia</option>
                                                <option value="WY">Wyoming</option>
                                            </optgroup>
                                            <optgroup label="Canadian Provinces">
                                                <option value="AB">Alberta</option>
                                                <option value="BC">British Columbia</option>
                                                <option value="MB">Manitoba</option>
                                                <option value="NB">New Brunswick</option>
                                                <option value="NF">Newfoundland</option>
                                                <option value="NT">Northwest Territories</option>
                                                <option value="NS">Nova Scotia</option>
                                                <option value="NU">Nunavut</option>
                                                <option value="ON">Ontario</option>
                                                <option value="PE">Prince Edward Island</option>
                                                <option value="QC">Quebec</option>
                                                <option value="SK">Saskatchewan</option>
                                                <option value="YT">Yukon Territory</option>
                                            </optgroup>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-5" ng-if="IsCanadianVersion">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Province</label>
                                        <select id="state" name="state" class="form-control" style="font-weight:bold" ng-model="newCustomer.State">
                                            <option value="">Select One</option>
                                            <option value="AB">Alberta</option>
                                            <option value="BC">British Columbia</option>
                                            <option value="MB">Manitoba</option>
                                            <option value="NB">New Brunswick</option>
                                            <option value="NF">Newfoundland</option>
                                            <option value="NT">Northwest Territories</option>
                                            <option value="NS">Nova Scotia</option>
                                            <option value="NU">Nunavut</option>
                                            <option value="ON">Ontario</option>
                                            <option value="PE">Prince Edward Island</option>
                                            <option value="QC">Quebec</option>
                                            <option value="SK">Saskatchewan</option>
                                            <option value="YT">Yukon Territory</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group-sm col-sm-3">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">ZIP Code</label>
                                        <input type="text" placeholder="ZIP Code" class="form-control" style="font-weight:bold" ng-model="newCustomer.ZipCode">
                                    </div>
                                </div>
                            </div>
                        </form>

                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <button type="button" class="btn btn-danger" ng-click="addCustomer()">OK</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="editPayrollDate" role="dialog">
            <div class="modal-dialog" style="width:300px">
                <div class="modal-content">
                    <div class="modal-header order-ui-subdialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-calendar"></span>&nbsp;&nbsp;Enter Payroll Date</h4>
                    </div>
                    <div class="modal-body" style="max-height:630px;overflow:auto;padding-top:0">
                        <form class="panel-body form-horizontal" style="padding-bottom:10px;padding-top:0; padding-left:0;padding-right:0">
                            <div class="row">
                                <div class="form-group-sm col-sm-12">
                                    <div class="d-flex flex-column">
                                        <label class="control-label">Payroll Date</label>
                                        <div class="input-group date" id="orderdate">
                                            <input type='text' class="form-control" style="font-weight:bold" placeholder="Payroll Date" ng-model="payrollDate" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <button type="button" class="btn btn-danger" ng-click="savePayrollDate()">Save</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="formulaEditor" role="dialog">
            <div class="modal-dialog" style="width:900px">
                <div class="modal-content">
                    <div class="modal-header order-ui-dialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-sort-by-attributes"></span>&nbsp;&nbsp;Commission Calculation - {{templateName}} {{formulaChanged ? '*' : ' '}}</h4>
                    </div>
                    <div class="modal-body" style="max-height:800px;height:600px;overflow:hidden;padding:0">
                        <div style="display:flex;flex-direction:column;height:100%">
                            <pre id="editor" style="width:100%;height:100%;margin-bottom:0"></pre>
                            <div class="panel panel-default" style="border-style:none;margin:0;flex: 0 1 auto">
                                <div class="panel-heading" style="border-style:none;" data-toggle="collapse" data-target="#testformula" aria-expanded="false" aria-controls="testformula"><span style="cursor:pointer;color:#787878;font-weight:bold"><i style="color:#e42820;" class="glyphicon glyphicon-flash"></i>&nbsp;Test</span></div>
                                <form id="testformula" class="panel-body collapse form-horizontal" style="padding-top:0;padding-bottom:5px">
                                    <div class="row">
                                        <div class="form-group-sm col-sm-3">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">Type of Sale<br />(<span style="color:darkblue;font-style:italic">type_of_sale</span>)</label>
                                                <select class="form-control" style="font-weight:bold" ng-model="test.Input.TypeOfSale" ng-options="option.ID as option.Name for option in [{ID:0, Name:'(0) Dealer Sale'}, {ID:1, Name:'(1) Direct Sale DSE'},  {ID:2, Name:'(2) Direct Sale RSM/DSE'},]"></select>
                                            </div>
                                        </div>
                                        <div class="form-group-sm col-sm-3">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">Order Date<br />(<span style="color:darkblue;font-style:italic">order_date</span>)</label>
                                                <div class="input-group date" id="orderdate">
                                                    <input type='text' class="form-control" style="font-weight:bold" placeholder="Order Date" ng-model="test.Input.OrderDate" />
                                                    <span class="input-group-addon">
                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group-sm col-sm-3" ng-hide="test.TemplateID==3">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">Total List Price<br />(<span style="color:darkblue;font-style:italic">list_price</span>)</label>
                                                <input class="form-control currency" style="font-weight:bold" ng-model="test.Input.ListPrice" />
                                            </div>
                                        </div>
                                        <div class="form-group-sm col-sm-3" ng-hide="test.TemplateID!=3">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">Total Equipment Price<br />(<span style="color:darkblue;font-style:italic">equipment_price</span>)</label>
                                                <input class="form-control currency" style="font-weight:bold" ng-model="test.Input.EquipmentPrice" />
                                            </div>
                                        </div>
                                        <div class="form-group-sm col-sm-3" ng-hide="test.TemplateID!=3">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">Total Tooling Price<br />(<span style="color:darkblue;font-style:italic">tooling_price</span>)</label>
                                                <input class="form-control currency" style="font-weight:bold" ng-model="test.Input.ToolingPrice" />
                                            </div>
                                        </div>
                                        <div class="form-group-sm col-sm-3" ng-hide="test.TemplateID!=3">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">Xpert40 or Xact Machine<br />(<span style="color:darkblue;font-style:italic">is_xpert40_or_xact_machine</span>)</label>
                                                <input type="checkbox" class="form-control" ng-model="test.Input.IsXpert40orXactMachine" />
                                            </div>
                                        </div>
                                        <div class="form-group-sm col-sm-3">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">Selling Price<br />(<span style="color:darkblue;font-style:italic">sale_price</span>)</label>
                                                <input class="form-control currency" style="font-weight:bold" ng-model="test.Input.SalePrice" />
                                            </div>
                                        </div>
                                        <div class="form-group-sm col-sm-3">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">Year-to-Date Sale<br />(<span style="color:darkblue;font-style:italic">ytd_sale</span>)</label>
                                                <input class="form-control currency" style="font-weight:bold" ng-model="test.Input.YtdSale" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group-sm col-sm-2">
                                            <button type="button" class="btn btn-danger" style="margin-top:10px;" ng-click="testFormula();"><i class="glyphicon glyphicon-play"></i>&nbsp;Run</button>
                                        </div>
                                        <div class="form-group-sm col-sm-10" style="margin-top:5px">
                                            <pre style="background-color:transparent;color:#e42820;border:none;font-family:cursive;">{{test.Output.Error}}</pre>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group-sm col-sm-2">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">Discount Amount<br />(<span style="color:darkblue;font-style:italic">discount_amount</span>)</label>
                                                <input class="form-control currency" style="font-weight:bold" ng-model="test.Output.DiscountAmount" readonly />
                                            </div>
                                        </div>
                                        <div class="form-group-sm col-sm-2">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">Discount %<br />(<span style="color:darkblue;font-style:italic">discount_percent</span>)</label>
                                                <input class="form-control percent" style="font-weight:bold" ng-model="test.Output.DiscountPercent" readonly />
                                            </div>
                                        </div>
                                        <div class="form-group-sm col-sm-2">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">Dealer's Comission<br />(<span style="color:darkblue;font-style:italic">dealer_comission</span>)</label>
                                                <input class="form-control currency" style="font-weight:bold" ng-model="test.Output.DealerCommission" readonly />
                                            </div>
                                        </div>
                                        <div class="form-group-sm col-sm-2">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">RSM Comission<br />(<span style="color:darkblue;font-style:italic">rsm_comission</span>)</label>
                                                <input class="form-control currency" style="font-weight:bold" ng-model="test.Output.RSMCommission" readonly />
                                            </div>
                                        </div>
                                        <div class="form-group-sm col-sm-2">
                                            <div class="d-flex flex-column">
                                                <label class="control-label">PM Comission<br />(<span style="color:darkblue;font-style:italic">pm_comission</span>)</label>
                                                <input class="form-control currency" style="font-weight:bold" ng-model="test.Output.PMCommission" readonly />
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <button type="button" class="btn btn-warning" style="margin-left:10px" ng-click="restoreDefaultFormula()"><i class="glyphicon glyphicon-repeat"></i>&nbsp;&nbsp;Restore Default</button>
                        <button type="button" class="btn btn-danger" ng-disabled="!formulaChanged" ng-click="saveFormula()">Save</button>
                        <button type="button" class="btn btn-default" ng-click="closeFormulaEditor()">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="settingsDialog" role="dialog">
            <div class="modal-dialog" style="width:500px">
                <div class="modal-content">
                    <div class="modal-header order-ui-dialog-titlebar">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title"><span class="glyphicon glyphicon-wrench"></span>&nbsp;&nbsp;Settings</h4>
                    </div>
                    <div class="modal-body" style="max-height:630px;overflow:auto;padding-top:0">
                        <form class="panel-body form-horizontal">
                            <div class="row">
                                <div class="form-inline">
                                    <div class="form-group col-sm-6">
                                        <label class="control-label" style="margin-top:-8px">Log out after</label>
                                        <input type='text' class="form-control" style="font-weight:bold;width:70px;margin-left:10px;margin-right:0px" ng-model="tmpSettings.IdleTimeout" />
                                    </div>
                                    <div class="form-group col-sm-6">
                                        <label class="control-label" style="margin-left:-15px">minutes of inactivity (1 ... 60)</label>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer" style="padding-top:5px;padding-bottom:5px">
                        <button type="button" class="btn btn-danger" ng-click="saveSettings()">Save</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="error" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content" style="background-color:#f2dede; padding-bottom:20px;padding-top:-10px">
                    <div class="modal-body" style="background-color:#f2dede; padding-top:0">
                        <h2 style="color:#a94442;font-weight:bold">Error</h2>
                        <h4 style="color:darkred">{{error.Message}}</h4>
                        <p style="color:black;font-family:'Courier New';font-size:small;overflow-x:auto">{{error.Details}}</p>
                        <button type="button" class="btn btn-sm btn-danger pull-right" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>